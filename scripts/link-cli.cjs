#! /usr/bin/env node

const fs = require('fs');
const path = require('path');

try {
  const script = process.argv[2] || '/usr/local/bin/agoric';
  const cli = path.resolve(__dirname, '../packages/agoric-cli/bin/agoric');
  const content = `\
#! /bin/sh
# AUTOMATICALLY GENERATED by ${process.argv[1]}
# Always execute the checked-out Agoric CLI with the --sdk flag.
exec ${cli} --sdk \${1+"\$@"}
`;
  console.log(`creating ${script}`);
  fs.writeFileSync(script, content);
  fs.chmodSync(script, '0755');
} catch (e) {
  console.error(err);
  process.exit(1);
}

process.exit(0);
